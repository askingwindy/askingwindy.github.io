<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />








  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="世界尽头与冷酷仙境" />



  <meta name="keywords" content="世界尽头与冷酷仙境" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="世界尽头与冷酷仙境">
<meta property="og:type" content="website">
<meta property="og:title" content="猫生">
<meta property="og:url" content="http://askingwindy.github.io/page/2/index.html">
<meta property="og:site_name" content="猫生">
<meta property="og:description" content="世界尽头与冷酷仙境">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="猫生">
<meta name="twitter:description" content="世界尽头与冷酷仙境">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'always'
  };
</script>

  <title> 猫生 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">猫生</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
    <div class="site-search">
      
  
  <form class="site-search-form">
    <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
  </form>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', '1LvasUPewmMcTCMJXJmZ','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/09/17/Java：泛型与重载/" itemprop="url">
                Java泛型与重载
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-09-17T12:36:30+08:00" content="2015-09-17">
            2015-09-17
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Java/" itemprop="url" rel="index">
                  <span itemprop="name">Java</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/09/17/Java：泛型与重载/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/17/Java：泛型与重载/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <p>今天遇到了一个重载问题，如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">inA</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">convert</span><span class="params">(List&lt;Intger&gt; list)</span></span>;<span class="comment">//compile error</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">convert</span><span class="params">(List&lt;Intger&gt; list)</span></span>;<span class="comment">//compile error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上的重载代码时编译都无法通过的，这是为什么呢？</p>
<ol>
<li>首先，我们来看看重载的定义；</li>
<li>其次，再来关心一下<code>List&lt;String&gt;</code>与<code>List&lt;Integer&gt;</code>有什么不同
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/09/17/Java：泛型与重载/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/19/SQL：时间与日期转换md/" itemprop="url">
                时间与日期转化
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-19T15:45:30+08:00" content="2015-08-19">
            2015-08-19
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/SQL/" itemprop="url" rel="index">
                  <span itemprop="name">SQL</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/19/SQL：时间与日期转换md/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/19/SQL：时间与日期转换md/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>在table表中的gmt_create是sql.date格式，包括了年-月-日 时：分：秒（e.g. <code>2015-08-10 12:34:56</code>）。</p>
<p>选取日期时间的各个部分可以采用如下函数：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 得到日期：2015-08-10</span></span><br><span class="line"><span class="operator"><span class="keyword">select</span> <span class="built_in">date</span>(<span class="string">'2015-08-10 12:34:56'</span>);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--得到时间：12:34:56</span></span><br><span class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">time</span>(<span class="string">'2015-08-10 12:34:56'</span>);</span></span><br></pre></td></tr></table></figure>
<p>我们可以分别通过</p>
<ul>
<li><p><code>year()</code>——得到年</p>
</li>
<li><p><code>quarter()</code>——得到季度</p>
</li>
<li><p><code>month()</code>——得到月</p>
</li>
<li><p><code>week()</code>——得到周</p>
</li>
<li><p><code>day()</code>——得到日</p>
</li>
<li><p><code>hour()</code>——得到小时</p>
</li>
<li><p><code>minute()</code>——得到分</p>
</li>
<li><p><code>second()</code>——得到秒</p>
</li>
<li><p><code>microsecond()</code>——得到微秒</p>
</li>
</ul>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/17/SQL：分页与优化/" itemprop="url">
                分页与优化
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-17T15:45:30+08:00" content="2015-08-17">
            2015-08-17
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/SQL/" itemprop="url" rel="index">
                  <span itemprop="name">SQL</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/17/SQL：分页与优化/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/17/SQL：分页与优化/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <h1 id="用于分页的limit">用于分页的<code>limit</code></h1><p><code>limit</code>后可接受一个参数或者两个参数，标准的<code>limit</code>用法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span>  <span class="keyword">LIMIT</span> offset, <span class="keyword">rows</span></span></span><br></pre></td></tr></table></figure>
<h2 id="一个参数">一个参数</h2><p>返回最大的记录行数目</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span>  <span class="keyword">LIMIT</span> <span class="number">10</span>;</span>	<span class="comment">--检索前10行数据</span></span><br></pre></td></tr></table></figure>
<p>所以<code>LIMIT n</code>等价于<code>LIMIT 0,n</code></p>
<h2 id="两个参数">两个参数</h2><ul>
<li><p>第一个参数指定第一个返回记录行的偏移量（初始偏移量是0，而不是1）</p>
</li>
<li><p>第二个参数指定返回记录行的最大数目</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">LIMIT</span> <span class="number">5</span>,<span class="number">10</span>;</span>	<span class="comment">--检索6-15行数据</span></span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/08/17/SQL：分页与优化/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/05/Spring MVC：返回类型/" itemprop="url">
                Spring MVC中的返回类型
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-05T14:13:30+08:00" content="2015-08-05">
            2015-08-05
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Java/" itemprop="url" rel="index">
                  <span itemprop="name">Java</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/05/Spring MVC：返回类型/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/05/Spring MVC：返回类型/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <p>spring mvc支持的返回类型包括：<code>ModelAndView</code>，<code>Model</code>，<code>ModelMap</code>，<code>Map</code>，<code>View</code>，<code>String</code>，<code>Void</code></p>
<h2 id="返回类型说明">返回类型说明</h2><h3 id="ModelAndeView">ModelAndeView</h3><p>通过ModelAndView构造方法可以指定返回的页面名称，也可以通过setViewName()方法跳转到指定的页面 ,使用addObject()设置需要返回的值，addObject()有几个不同参数的方法，可以默认和指定返回对象的名字。<br>ModelMap是LinkedHashMap的子类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@RequestMapping</span>(<span class="string">"/show1"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">show1</span><span class="params">(HttpServletRequest request, </span><br><span class="line">           HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123; </span><br><span class="line">	ModelAndView mav = <span class="keyword">new</span> ModelAndView(<span class="string">"/demo2/show"</span>); </span><br><span class="line">	mav.addObject(<span class="string">"account"</span>, <span class="string">"account -1"</span>); </span><br><span class="line">	<span class="keyword">return</span> mav; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>构造完ModelAndView对象之后，仍然可以利用addobject()方法为它添加模型属性，这个方法返回ModelAndView对象<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/08/05/Spring MVC：返回类型/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/04/SQL：外内键/" itemprop="url">
                SQL：主键、外键、索引
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-04T13:33:30+08:00" content="2015-08-04">
            2015-08-04
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/SQL/" itemprop="url" rel="index">
                  <span itemprop="name">SQL</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/04/SQL：外内键/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/04/SQL：外内键/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <h2 id="主键(primary_key)">主键(primary key)</h2><p> 主键能够唯一标识表中某一行的属性或属性组。</p>
<ul>
<li>一个表只能有一个主键，但可以有多个候选索引。</li>
<li>主键常常与外键构成参照完整性约束，防止出现数据不一致。</li>
<li>主键可以保证记录的唯一和主键域非空,数据库管理系统对于主键自动生成唯一索引，所以主键也是一个特殊的索引。</li>
</ul>
<h2 id="外键(foreign_key)">外键(foreign key)</h2><p>外键是用于建立和加强两个表数据之间的链接的一列或多列。</p>
<ul>
<li>外键约束主要用来维护两个表之间数据的一致性。简言之，表的外键就是另一表的主键，外键将两表联系起来。</li>
<li>一般情况下，要删除一张表中的主键必须首先要确保其它表中的没有相同外键（即该表中的主键没有一个外键和它相关联）。</li>
</ul>
<h2 id="索引(index)">索引(index)</h2><p>索引是用来快速地寻找那些具有特定值的记录。</p>
<ul>
<li>主要是为了检索的方便，是为了加快访问速度， 按一定的规则创建的，一般起到排序作用。</li>
<li>所谓<strong>唯一性索引</strong>，这种索引和前面的“普通索引”基本相同，但有一个区别：索引列的所有值都只能出现一次，即必须唯一。
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/08/04/SQL：外内键/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/03/Spring MVC：流程与代码/" itemprop="url">
                Spring MVC流程与代码
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-03T14:33:30+08:00" content="2015-08-03">
            2015-08-03
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Java/" itemprop="url" rel="index">
                  <span itemprop="name">Java</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/03/Spring MVC：流程与代码/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/03/Spring MVC：流程与代码/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <h2 id="DispathcerServlet核心代码">DispathcerServlet核心代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//前端控制器分派方法  </span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doDispatch</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;  </span><br><span class="line">      HttpServletRequest processedRequest = request;  </span><br><span class="line">      HandlerExecutionChain mappedHandler = <span class="keyword">null</span>;  </span><br><span class="line">      <span class="keyword">int</span> interceptorIndex = -<span class="number">1</span>;  </span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;  </span><br><span class="line">          ModelAndView mv;  </span><br><span class="line">          <span class="keyword">boolean</span> errorView = <span class="keyword">false</span>;  </span><br><span class="line"></span><br><span class="line">          <span class="keyword">try</span> &#123;  </span><br><span class="line">              <span class="comment">//检查是否是请求是否是multipart（如文件上传），如果是将通过MultipartResolver解析  </span></span><br><span class="line">              processedRequest = checkMultipart(request);  </span><br><span class="line">              <span class="comment">//步骤2、请求到处理器（页面控制器）的映射，通过HandlerMapping进行映射  </span></span><br><span class="line">              mappedHandler = getHandler(processedRequest, <span class="keyword">false</span>);  </span><br><span class="line">              <span class="keyword">if</span> (mappedHandler == <span class="keyword">null</span> || mappedHandler.getHandler() == <span class="keyword">null</span>) &#123;  </span><br><span class="line">                  noHandlerFound(processedRequest, response);  </span><br><span class="line">                  <span class="keyword">return</span>;  </span><br><span class="line">              &#125;  </span><br><span class="line">              <span class="comment">//步骤3、处理器适配，即将我们的处理器包装成相应的适配器（从而支持多种类型的处理器）  </span></span><br><span class="line">              HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());  </span><br><span class="line"></span><br><span class="line">              <span class="comment">// 304 Not Modified缓存支持  </span></span><br><span class="line">              <span class="comment">//此处省略具体代码  </span></span><br><span class="line"></span><br><span class="line">              <span class="comment">// 执行处理器相关的拦截器的预处理（HandlerInterceptor.preHandle）  </span></span><br><span class="line">              <span class="comment">//此处省略具体代码  </span></span><br><span class="line"></span><br><span class="line">              <span class="comment">// 步骤4、由适配器执行处理器（调用处理器相应功能处理方法）  </span></span><br><span class="line">              mv = ha.handle(processedRequest, response, mappedHandler.getHandler());  </span><br><span class="line"></span><br><span class="line">              <span class="comment">// Do we need view name translation?  </span></span><br><span class="line">              <span class="keyword">if</span> (mv != <span class="keyword">null</span> &amp;&amp; !mv.hasView()) &#123;  </span><br><span class="line">                  mv.setViewName(getDefaultViewName(request));  </span><br><span class="line">              &#125;  </span><br><span class="line"></span><br><span class="line">              <span class="comment">// 执行处理器相关的拦截器的后处理（HandlerInterceptor.postHandle）  </span></span><br><span class="line">              <span class="comment">//此处省略具体代码  </span></span><br><span class="line">          &#125;  </span><br><span class="line">          <span class="keyword">catch</span> (ModelAndViewDefiningException ex) &#123;  </span><br><span class="line">              logger.debug(<span class="string">"ModelAndViewDefiningException encountered"</span>, ex);  </span><br><span class="line">              mv = ex.getModelAndView();  </span><br><span class="line">          &#125;  </span><br><span class="line">          <span class="keyword">catch</span> (Exception ex) &#123;  </span><br><span class="line">              Object handler = (mappedHandler != <span class="keyword">null</span> ? mappedHandler.getHandler() : <span class="keyword">null</span>);  </span><br><span class="line">              mv = processHandlerException(processedRequest, response, handler, ex);  </span><br><span class="line">              errorView = (mv != <span class="keyword">null</span>);  </span><br><span class="line">          &#125;  </span><br><span class="line"></span><br><span class="line">          <span class="comment">//步骤5 步骤6、解析视图并进行视图的渲染  </span></span><br><span class="line">          <span class="comment">//步骤5 由ViewResolver解析View（viewResolver.resolveViewName(viewName, locale)）  </span></span><br><span class="line">          <span class="comment">//步骤6 视图在渲染时会把Model传入（view.render(mv.getModelInternal(), request, response);）  </span></span><br><span class="line">          <span class="keyword">if</span> (mv != <span class="keyword">null</span> &amp;&amp; !mv.wasCleared()) &#123;  </span><br><span class="line">              render(mv, processedRequest, response);  </span><br><span class="line">              <span class="keyword">if</span> (errorView) &#123;  </span><br><span class="line">                  WebUtils.clearErrorRequestAttributes(request);  </span><br><span class="line">              &#125;  </span><br><span class="line">          &#125;  </span><br><span class="line">          <span class="keyword">else</span> &#123;  </span><br><span class="line">              <span class="keyword">if</span> (logger.isDebugEnabled()) &#123;  </span><br><span class="line">                  logger.debug(<span class="string">"Null ModelAndView returned to DispatcherServlet with name '"</span> + getServletName() +  </span><br><span class="line">                          <span class="string">"': assuming HandlerAdapter completed request handling"</span>);  </span><br><span class="line">              &#125;  </span><br><span class="line">          &#125;  </span><br><span class="line"></span><br><span class="line">          <span class="comment">// 执行处理器相关的拦截器的完成后处理（HandlerInterceptor.afterCompletion）  </span></span><br><span class="line">          <span class="comment">//此处省略具体代码  </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">catch</span> (Exception ex) &#123;  </span><br><span class="line">          <span class="comment">// Trigger after-completion for thrown exception.  </span></span><br><span class="line">          triggerAfterCompletion(mappedHandler, interceptorIndex, processedRequest, response, ex);  </span><br><span class="line">          <span class="keyword">throw</span> ex;  </span><br><span class="line">      &#125;  </span><br><span class="line">      <span class="keyword">catch</span> (Error err) &#123;  </span><br><span class="line">          ServletException ex = <span class="keyword">new</span> NestedServletException(<span class="string">"Handler processing failed"</span>, err);  </span><br><span class="line">          <span class="comment">// Trigger after-completion for thrown exception.  </span></span><br><span class="line">          triggerAfterCompletion(mappedHandler, interceptorIndex, processedRequest, response, ex);  </span><br><span class="line">          <span class="keyword">throw</span> ex;  </span><br><span class="line">      &#125;  </span><br><span class="line"></span><br><span class="line">      <span class="keyword">finally</span> &#123;  </span><br><span class="line">          <span class="comment">// Clean up any resources used by a multipart request.  </span></span><br><span class="line">          <span class="keyword">if</span> (processedRequest != request) &#123;  </span><br><span class="line">              cleanupMultipart(processedRequest);  </span><br><span class="line">          &#125;  </span><br><span class="line">      &#125;  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/08/03/Spring MVC：流程与代码/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/03/Gibook的安装与使用/" itemprop="url">
                Gibook的安装与使用
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-08-03T14:33:30+08:00" content="2015-08-03">
            2015-08-03
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Blog/" itemprop="url" rel="index">
                  <span itemprop="name">Blog</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/03/Gibook的安装与使用/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/03/Gibook的安装与使用/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h1 id="Gibook的安装与使用">Gibook的安装与使用</h1><h2 id="Gitbook的安装">Gitbook的安装</h2><p>需要先安装nodejs（windows下直接去官网下载即可），然后利用cmd中命令行安装：<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm <span class="keyword">install</span> gitbook -g</span><br></pre></td></tr></table></figure></p>
<h2 id="Gitbook的使用">Gitbook的使用</h2><p>参考<a href="http://www.chengweiyang.cn/gitbook/gitbook.com/newbook.html" target="_blank" rel="external">创建gitbook</a>来创建书本、编辑书本、配置书本后就可以使用了</p>
<h3 id="根据SUMMARY-md来生成目录">根据SUMMARY.md来生成目录</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">gitbook</span> init</span><br></pre></td></tr></table></figure>
<h3 id="推荐使用方法">推荐使用方法</h3><p>参考<a href="https://chrisniael.gitbooks.io/gitbook-documentation/content/github/index.html" target="_blank" rel="external">将gitbook集成到github上</a>，并设置webhook；这样以后可以直接使用github中关联的仓库，更改文件提交即可！</p>
<h1 id="参考文件：">参考文件：</h1><ul>
<li><a href="https://chrisniael.gitbooks.io/gitbook-documentation/content/platform/search.html" target="_blank" rel="external">gitbook中文文档</a></li>
<li><a href="http://www.chengweiyang.cn/gitbook/gitbook.com/config/theme.html" target="_blank" rel="external">gitbook一些高级配置</a></li>
<li><a href="http://wanqingwong.com/gitbook-zh/book/file.html" target="_blank" rel="external">gitbook配置入门</a></li>
</ul>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/05/10/SQL：存储过程/" itemprop="url">
                存储过程
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-05-10T16:36:20+08:00" content="2015-05-10">
            2015-05-10
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/SQL/" itemprop="url" rel="index">
                  <span itemprop="name">SQL</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/05/10/SQL：存储过程/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/10/SQL：存储过程/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>概念类似函数，就是把一段代码封装起来</p>
<p>当执行这一段代码的时候，可以调用该存储过程来执行。</p>
<p>在封装的语句体里，可以用if/else, case,while等控制结构：可以进行sql编程</p>
<h2 id="存储过程语法">存储过程语法</h2><h3 id="新建一个存储过程">新建一个存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> 存储过程名字()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  #<span class="keyword">SQL</span>语句</span><br><span class="line"><span class="keyword">END</span>||</span></span><br></pre></td></tr></table></figure>
<h3 id="查看现有的存储过程">查看现有的存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SHOW</span> <span class="keyword">PROCEDURE</span> <span class="keyword">STATUS</span>;</span></span><br></pre></td></tr></table></figure>
<h3 id="删除存储过程">删除存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> 存储过程名字;</span></span><br></pre></td></tr></table></figure>
<h3 id="调用存储过程">调用存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">CALL</span> 存储过程名字();</span></span><br></pre></td></tr></table></figure></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/04/29/SQL：JDBC/" itemprop="url">
                学习JDBC:JDBC
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-04-29T16:36:30+08:00" content="2015-04-29">
            2015-04-29
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/SQL/" itemprop="url" rel="index">
                  <span itemprop="name">SQL</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/04/29/SQL：JDBC/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/29/SQL：JDBC/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="description">主要介绍了什么是JDBC，以及在JAVA里面如何关联数据库</span>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/04/29/SQL：JDBC/">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/04/28/Java：JAVA遇到的问题-集合的深克隆/" itemprop="url">
                集合的深克隆
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-04-28T12:36:30+08:00" content="2015-04-28">
            2015-04-28
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Java/" itemprop="url" rel="index">
                  <span itemprop="name">Java</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/04/28/Java：JAVA遇到的问题-集合的深克隆/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/28/Java：JAVA遇到的问题-集合的深克隆/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <h2 id="浅克隆">浅克隆</h2><ul>
<li>被复制对象的所有变量都含有与原来的对象相同的值，而所有的对其他对象的引用仍然指向原来的对象。</li>
</ul>
<p>换言之，浅复制仅仅复制所考虑的对象，而不复制它所引用的对象<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ClassA  a = <span class="keyword">new</span> ClassA();</span><br><span class="line">ClassA shallowClone = a;<span class="comment">//浅拷贝</span></span><br></pre></td></tr></table></figure></p>
<p>浅拷贝中，如果改变了a指向的对象，会影响shallowClone指向的对象<br><img src="http://askingwindy-gitcafe.qiniudn.com/浅拷贝.png" alt="浅拷贝例子"><br>为了避免这种情况，需要进行深克隆</p>
<h2 id="深克隆">深克隆</h2><ul>
<li>被复制对象的所有变量都含有与原来的对象相同的值，除去那些引用其他对象的变量。那些引用其他对象的变量将指向被复制过的新对象，而不再是原有的那些被引用的对象。</li>
</ul>
<p>换言之，深复制把要复制的对象所引用的对象都复制了一遍。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ClassA  a = <span class="keyword">new</span> ClassA();</span><br><span class="line">ClassA shallowClone = a.clone();<span class="comment">//浅拷贝</span></span><br></pre></td></tr></table></figure></p>
<p>注意，这里可以调用<code>a.clone()</code>方法，那么<code>ClassA</code>必须实现了<code>Cloneable</code>接口<br><img src="http://askingwindy-gitcafe.qiniudn.com/深拷贝.png" alt="深拷贝例子"></p>
<h2 id="Cloneable接口">Cloneable接口</h2><ul>
<li>Cloneable接口里面没有任何的方法，它用来指明一个类可以逐位复制一个对象——Marker Interface（标识接口，没有定义任何的方法，如Cloneable和Serializable接口）<ul>
<li>如果你试图对一个没有实现Cloneable接口的类调用clone()方法，一个CloneNotSupportedException 就会抛出。</li>
<li>在复制时，被复制的对象的构造器并没有被调用。复制对象就是原来对象的拷贝</li>
</ul>
</li>
<li>需要override的clone()方法是属于Object类的。但是Object类的clone()方法访问权限是：protected</li>
<li>clone()产生了一个调用它的对象的复制;只有实现了Cloneable接口的类才可以被复制</li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/04/28/Java：JAVA遇到的问题-集合的深克隆/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/04/21/SQL：索引/" itemprop="url">
                索引
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-04-21T16:36:20+08:00" content="2015-04-21">
            2015-04-21
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/SQL/" itemprop="url" rel="index">
                  <span itemprop="name">SQL</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/04/21/SQL：索引/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/21/SQL：索引/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>索引是针对数据建立的目录</p>
<p>作用：加快查询速度</p>
<p>坏处：</p>
<ul>
<li><p>降低增删改的速度</p>
</li>
<li><p>增大了表的文件大小（索引文件甚至可能比数据文件还大）</p>
</li>
</ul>
<h2 id="案例">案例</h2><p>设新闻表有15列10行，共500W行数据，如何快速导入？</p>
<ol>
<li><p>空白索引全部删除</p>
</li>
<li><p>导入数据</p>
</li>
<li><p>数据导入完毕后，集中建立索引</p>
</li>
</ol>
<h2 id="索引原则">索引原则</h2><ol>
<li><p>不过度索引</p>
</li>
<li><p>建立索引条件列:</p>
<ul>
<li><code>WHERE</code>后面最频繁的条件比较适宜索引</li>
</ul>
</li>
<li><p>索引散列值，过于集中的值不要索引（没有意义）</p>
</li>
</ol>
<h2 id="索引类型">索引类型</h2><table>
<thead>
<tr>
<th>索引名</th>
<th>普通索引</th>
<th>唯一索引</th>
<th>主键索引</th>
<th>全文索引</th>
</tr>
</thead>
<tbody>
<tr>
<td>作用</td>
<td>仅是加快查询速度</td>
<td>行上的值不能重复</td>
<td>主键必唯一，但是唯一索引不一定是主键</td>
<td>在mysql默认情况下，对中文意义不大</td>
</tr>
<tr>
<td>声明语法</td>
<td><code>INDEX</code></td>
<td><code>UNIQUE</code></td>
<td><code>PRIMARY KEY</code></td>
<td><code>FULLTEXT</code></td>
</tr>
<tr>
<td>默认类型</td>
<td>BTREE</td>
<td>BTREE</td>
<td>BTREE</td>
<td>FULLTEXT</td>
</tr>
</tbody>
</table>
<ul>
<li>一张表上只能有一个主键，但是可以有一个或多个唯一索引</li>
</ul>
<h3 id="FULLTEXT">FULLTEXT</h3><p>全文索引对中文意义不大</p>
<p>因为英文中有空格、标点符号来拆单词，从而对单词进行索引</p>
<p>而中文没有空格来隔开单词，mysql无法识别每个中文词</p>
<h4 id="用法">用法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">MATCH</span> (索引名) AGAINSET (<span class="string">'索引词'</span>);</span></span><br></pre></td></tr></table></figure>
<h4 id="全文索引停止词">全文索引停止词</h4><p>全文索引不针对非常频繁的词做索引，如：this, is, you等</p>
<h2 id="索引语句">索引语句</h2><h3 id="查看一张表的索引">查看一张表的索引</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span> 表名</span></span><br></pre></td></tr></table></figure>
<h3 id="建立索引">建立索引</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">INDEX</span>/<span class="keyword">UNIQUE</span>/FULLTEXT [索引名](列名) #索引名可选</span><br><span class="line"></span><br><span class="line">/<span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> #主键值不需要索引名的</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> member(</span><br><span class="line">id <span class="built_in">int</span>,</span><br><span class="line">email <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">tel <span class="built_in">char</span>(<span class="number">11</span>),</span><br><span class="line">intro <span class="built_in">text</span></span><br><span class="line">)<span class="keyword">ENGINE</span> MYISAM <span class="keyword">CHARSET</span> UTF8;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#给tel列加一个普通的索引</span><br><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> member <span class="keyword">ADD</span> <span class="keyword">INDEX</span> tel(tel);</span></span><br><span class="line"></span><br><span class="line">#给email加一个唯一索引</span><br><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> member <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> (email);</span></span><br><span class="line"></span><br><span class="line">#给intro加一个全文索引</span><br><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> member <span class="keyword">ADD</span> FULLTEXT (intro);</span></span><br><span class="line"></span><br><span class="line">#给id加一个主键索引</span><br><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> MEMBER <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> (id);</span></span><br></pre></td></tr></table></figure>
<h3 id="删除索引">删除索引</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#删除非主键索引</span><br><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">INDEX</span> 索引名;</span></span><br><span class="line"></span><br><span class="line">#删除主键索引</span><br><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span>;</span></span><br></pre></td></tr></table></figure></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/04/20/SQL：触发器/" itemprop="url">
                触发器
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-04-20T16:36:20+08:00" content="2015-04-20">
            2015-04-20
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/SQL/" itemprop="url" rel="index">
                  <span itemprop="name">SQL</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/04/20/SQL：触发器/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/20/SQL：触发器/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>作用：监视某种情况，并触发某种操作</p>
<ul>
<li><p>能触发的操作：增、删、改</p>
</li>
<li><p>能监视的操作：增、删、改</p>
</li>
</ul>
<p>应用场合：向一张表添加、删除时，需要在相关的表中进行同步</p>
<h2 id="触发器创建四要素">触发器创建四要素</h2><table>
<thead>
<tr>
<th>名字</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr>
<td>监视地点</td>
<td>TABLE</td>
</tr>
<tr>
<td>监视事件</td>
<td>INSERT/UPDATE/DELETE</td>
</tr>
<tr>
<td>触发时间</td>
<td>AFTER/BEFORE</td>
</tr>
<tr>
<td>触发事件</td>
<td>INSERT/UPDATE/DELETE</td>
</tr>
</tbody>
</table>
<h3 id="创建触发器语法">创建触发器语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> 触发器名字</span><br><span class="line"><span class="keyword">AFTER</span>/<span class="keyword">BEFORE</span> <span class="keyword">INSERT</span>/<span class="keyword">UPDATE</span>/<span class="keyword">DELETE</span> <span class="keyword">ON</span> 表名</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> #固定语句</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">sql</span>语句（限于增删改），一句或多句;</span></span><br><span class="line"><span class="operator"><span class="keyword">END</span> ||</span></span><br></pre></td></tr></table></figure>
<h3 id="删除触发器语法">删除触发器语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> 触发器名字;</span></span><br></pre></td></tr></table></figure>
<h3 id="查看触发器">查看触发器</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SHOW</span> <span class="keyword">TRIGGERS</span>;</span></span><br></pre></td></tr></table></figure>
<h2 id="实例：订单与库存管理">实例：订单与库存管理</h2><p>触发时间：<code>AFTER</code></p>
<h3 id="准备工作">准备工作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#建立商品表</span><br><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> g(</span><br><span class="line">id <span class="built_in">int</span>,</span><br><span class="line">name <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">num <span class="built_in">int</span></span><br><span class="line">)<span class="keyword">CHARSET</span> UTF8;</span></span><br><span class="line"></span><br><span class="line">#建立订单表</span><br><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> o(</span><br><span class="line">oid <span class="built_in">int</span>,</span><br><span class="line">gid <span class="built_in">int</span>,</span><br><span class="line">much <span class="built_in">int</span></span><br><span class="line">)<span class="keyword">CHARSET</span> UTF8;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> g</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">'猪'</span>, <span class="number">22</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">'羊'</span>, <span class="number">19</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">'狗'</span>, <span class="number">12</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="string">'猫'</span>, <span class="number">8</span>);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> o</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#手动更新</span><br><span class="line"><span class="operator"><span class="keyword">UPDATE</span> g <span class="keyword">SET</span> num = num-<span class="number">3</span></span><br><span class="line"><span class="keyword">WHERE</span> id = <span class="number">2</span>;</span></span><br></pre></td></tr></table></figure>
<h3 id="增加一个订单">增加一个订单</h3><p>要求：增加订单，库存数量相应变化</p>
<ul>
<li><p>监视地点：o表</p>
</li>
<li><p>监视操作：INSERT</p>
</li>
<li><p>触发操作：UPDATE</p>
</li>
<li><p>触发时间：AFTER</p>
</li>
</ul>
<h4 id="建立简单触发器">建立简单触发器</h4><p>每一次只能对id=2的num进行操作</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#改变结束符</span><br><span class="line">DELIMITER || #结束符为||,注意后面没有分号</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#建立触发器</span><br><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tg1</span><br><span class="line"><span class="keyword">AFTER</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> o</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">UPDATE</span> g <span class="keyword">SET</span> NUM = NUM-<span class="number">3</span> <span class="keyword">WHERE</span> id = <span class="number">2</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">END</span> ||</span></span><br></pre></td></tr></table></figure>
<h4 id="如何在触发器引用行的值">如何在触发器引用行的值</h4><ul>
<li><p>对于<code>INSERT</code>而言，新增的行用<code>NEW</code>来表示</p>
<ul>
<li>行中每一列的值，用<code>NEW.列名</code>来表示</li>
</ul>
</li>
<li><p>对于<code>DELETE</code>而言，删除的行的值用<code>OLD.列名</code>来表示</p>
</li>
<li><p>对于<code>UPDATE</code>而言，修改前的行中的值用<code>OLD.列名</code>来引用，而修改后的数据用<code>NEW.列名</code>来引用</p>
</li>
</ul>
<h4 id="简单触发器升级版">简单触发器升级版</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tg2</span><br><span class="line"><span class="keyword">AFTER</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> o</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">UPDATE</span> g <span class="keyword">SET</span> NUM = NUM - NEW.much <span class="keyword">WHERE</span> id = NEW.gid;</span></span><br><span class="line"><span class="operator"><span class="keyword">END</span> ||</span></span><br></pre></td></tr></table></figure>
<h3 id="删除一个订单">删除一个订单</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tg3</span><br><span class="line"><span class="keyword">AFTER</span> <span class="keyword">DELETE</span> <span class="keyword">ON</span> o</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span> </span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">UPDATE</span> g <span class="keyword">SET</span> NUM = NUM + OLD.much <span class="keyword">WHERE</span> id = OLD.gid;</span></span><br><span class="line"><span class="operator"><span class="keyword">END</span> ||</span></span><br></pre></td></tr></table></figure>
<h3 id="更新一个订单">更新一个订单</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tg4</span><br><span class="line"><span class="keyword">AFTER</span> <span class="keyword">UPDATE</span> <span class="keyword">ON</span> o</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">UPDATE</span> g <span class="keyword">SET</span> NUM = NUM + OLD.much <span class="keyword">WHERE</span> id = OLD.gid;</span></span><br><span class="line"><span class="operator"><span class="keyword">UPDATE</span> g <span class="keyword">SET</span> NUM = NUM - NEW.much <span class="keyword">WHERE</span> id = NEW.gid;</span></span><br><span class="line"><span class="operator"><span class="keyword">END</span> ||</span></span><br></pre></td></tr></table></figure>
<h2 id="AFTER和BEFORE区别"><code>AFTER</code>和<code>BEFORE</code>区别</h2><ul>
<li><p><code>AFTER</code>:先完成数据的增删改，在触发</p>
<ul>
<li>触发语句晚于增删改，无法影响前面的增删改</li>
</ul>
</li>
<li><p><code>BEFORE</code>：先完成触发，再完成增删改</p>
<ul>
<li>触发语句先于监视的增删改发生  </li>
</ul>
</li>
</ul>
<h3 id="典型案例">典型案例</h3><p>对于所下订单进行判断，如果订单数量&gt;5， 认为是恶意订单，强制把所定商品数量改成5</p>
<h4 id="触发器四要素">触发器四要素</h4><ol>
<li><p>监视地点: o</p>
</li>
<li><p>监视事件：INSERT</p>
</li>
<li><p>触发事件：UPDATE</p>
</li>
<li><p>触发事件: BEFORE</p>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tg5</span><br><span class="line"><span class="keyword">BEFORE</span> <span class="keyword">INSERT</span> <span class="keyword">ON</span> o</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">IF</span> NEW.much &gt; <span class="number">5</span> <span class="keyword">THEN</span></span><br><span class="line">        <span class="keyword">SET</span> NEW.much = <span class="number">5</span>;</span></span><br><span class="line">    <span class="operator"><span class="keyword">END</span> <span class="keyword">IF</span>;</span></span><br><span class="line">    <span class="operator"><span class="keyword">UPDATE</span> g <span class="keyword">SET</span> NUM = NUM - NEW.much <span class="keyword">WHERE</span> id = NEW.gid;</span></span><br><span class="line"><span class="operator"><span class="keyword">END</span> ||</span></span><br></pre></td></tr></table></figure></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/04/16/搭建自己的Blog_hexo/" itemprop="url">
                搭建自己的Blog:hexo
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-04-16T16:36:30+08:00" content="2015-04-16">
            2015-04-16
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Blog/" itemprop="url" rel="index">
                  <span itemprop="name">Blog</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/04/16/搭建自己的Blog_hexo/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/16/搭建自己的Blog_hexo/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <h1 id="hexo简介">hexo简介</h1><p><a href="http://hexo.io/zh-cn/">Hexo</a>可以将本地生成的静态网页托管到github或者gitcafe上，作者是台湾的<a href="https://github.com/tommy351/hexo">@tommy351</a><br>根据网上教程，目前看来常使用的命令只有：<code>hexo g</code>, <code>hexo s</code>, <code>hexo d</code>和<code>hexo new ...</code>，十分简单方便</p>
<h2 id="hexo管理blog的流程">hexo管理blog的流程</h2><h3 id="创建新的文章">创建新的文章</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">"新文章名字"</span></span><br></pre></td></tr></table></figure>
<p>利用<a href="http://markdownpad.com/">MarkdownPad</a>在本地打开新建的文章，输入内容，并保存。</p>
<h3 id="更新本地blog">更新本地blog</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure>
<h3 id="本地查看blog">本地查看blog</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>此时，在浏览器中输入网址<a href="http://127.0.0.1:4000/">localhost:4000</a>，就可以查看最新的blog。</p>
<h3 id="在网上更新自己的blog">在网上更新自己的blog</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>为了使自己的系统能顺利执行以上命令并发表blog，需要做一些准备工作。</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/04/16/搭建自己的Blog_hexo/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/04/10/SQL：字符集与校对集/" itemprop="url">
                字符集与校对集
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-04-10T16:36:20+08:00" content="2015-04-10">
            2015-04-10
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/SQL/" itemprop="url" rel="index">
                  <span itemprop="name">SQL</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/04/10/SQL：字符集与校对集/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/10/SQL：字符集与校对集/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <h2 id="字符集">字符集</h2><p>Mysql的字符集设置非常灵活，可以设置服务器默认的字符集</p>
<ul>
<li>数据库默认字符集</li>
<li>表默认字符集</li>
<li>列字符集</li>
<li>某个级别没有指定的话，直接继承上一级</li>
</ul>
<h3 id="以表声明为UTF8为例">以表声明为UTF8为例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> a(</span><br><span class="line">id <span class="built_in">int</span></span><br><span class="line">)<span class="keyword">CHARSET</span> UTF8;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>存储在数据表中的数据最终是UTF8</li>
</ul>
<h4 id="客户端与服务器">客户端与服务器</h4><p>客户端是GBK编码，服务器是UTF8编码<br><img src="http://askingwindy-gitcafe.qiniudn.com/SQL字符集.png" alt="服务器与客户端字符集"></p>
<h5 id="SQL语句字符集">SQL语句字符集</h5><p>客户端(GBK) ===&gt; 字符集链接器(GBK(来自客户端)-&gt;GBK(连接器)-&gt;UTF8(发给服务器))===&gt;服务器（UTF8</p>
<ol>
<li><p>告诉服务器，我给你发送的数据是什么编码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SET</span> CHARACTER_SET_CLIENT = GBK;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>告诉连接器，转化成什么编码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SET</span> CHARACTER_SET_CONNECTION = GBK;</span>#指定的是连接器中中间的那个GBK</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询结果是什么编码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">SET</span> CHARACTER_SET_RESULTS = GBK;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="什么时候出现乱码">什么时候出现乱码</h4><ol>
<li>客户端声明的字符集与事实不符</li>
<li>查询结果字符集与客户端页面不符合
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/04/10/SQL：字符集与校对集/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/04/09/SQL：视图/" itemprop="url">
                视图
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-04-09T13:36:30+08:00" content="2015-04-09">
            2015-04-09
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/SQL/" itemprop="url" rel="index">
                  <span itemprop="name">SQL</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/04/09/SQL：视图/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/09/SQL：视图/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>视图是由查询结果形成的一张虚拟表</p>
<h2 id="语法">语法</h2><h3 id="创建视图">创建视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> 视图名</span><br><span class="line"><span class="keyword">AS</span> <span class="keyword">SELECT</span> 语句</span></span><br></pre></td></tr></table></figure>
<h3 id="删除视图">删除视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DRIP VIEW 视图名</span><br></pre></td></tr></table></figure>
<h3 id="修改视图">修改视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> 视图名 </span><br><span class="line"><span class="keyword">AS</span> <span class="keyword">SELECT</span> 语句</span></span><br></pre></td></tr></table></figure>
<h2 id="视图的作用">视图的作用</h2><ol>
<li><p>简化查询</p>
</li>
<li><p>进行权限控制</p>
<ul>
<li>把表的权限封闭，但是开放相应的视图权限，视图只开放部分数据</li>
</ul>
</li>
<li><p>大数据分表时用到</p>
<ul>
<li>表的行数超过200w，速度很慢==&gt;把1张表的数据拆成4张表来存放</li>
</ul>
</li>
</ol>
<h2 id="视图的algorithm">视图的algorithm</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">CREATE</span> ALGORITHM = 规则 <span class="keyword">VIEW</span> 视图名 ...</span></span><br></pre></td></tr></table></figure>
<h3 id="MERGE"><code>MERGE</code></h3><p>当引用视图时，引用视图的语句与定义视图的语句合并</p>
<ul>
<li>当查询视图时，把查询视图的语句（<code>WHERE</code>那些）与创建视图的语句合并，分析形成一条新的<code>SELECT</code>语句</li>
</ul>
<h3 id="TEMPTABLE"><code>TEMPTABLE</code></h3><p>当引用视图时，根据视图的创建语句建立一张临时表</p>
<p>然后查询视图的语句==从这张临时表查看数据</p>
<h3 id="UNDEFINED"><code>UNDEFINED</code></h3><p>未定义，系统选定</p>
<h2 id="视图与表的关系">视图与表的关系</h2><p>视图是表的查询结果，所以表的数据改变会影响视图的结果</p>
<h3 id="如果视图改变了呢？">如果视图改变了呢？</h3><ol>
<li><p>视图的增删改也会影响表</p>
</li>
<li><p>但是视图并不总是能增删改：只有视图的数据与表的数据一一对应时才可以修改</p>
</li>
<li><p>对于<code>INSERT</code>还需要注意：视图必须包含表中没有默认值的列</p>
</li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/">&laquo;</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">&raquo;</a>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://askingwindy-gitcafe.qiniudn.com/touxiang.png" alt="Askingwindy" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Askingwindy</p>
        </div>
        <p class="site-description motion-element" itemprop="description">世界尽头与冷酷仙境</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">43</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">13</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://github.com/askingwindy?tab=repositories" target="_blank">GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://askingwindy.gitbooks.io/gitbook-java-interview-note/content/" target="_blank">Java面试准备</a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Askingwindy</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"askingwindy"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
     
  	  <script type="text/javascript">
  		var duoshuo_user_ID = 5813686
      var duoshuo_admin_nickname="askingwindy"
  	  </script>
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
